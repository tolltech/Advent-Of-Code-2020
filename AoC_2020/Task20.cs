using System;
using System.Collections.Generic;
using System.Linq;
using NUnit.Framework;

namespace AoC_2020
{
    [TestFixture]
    public class Task20
    {
        [Test]
        [TestCaseSource(nameof(TestCases))]
        public long Task(string input)
        {
            var blocks = input.Split("\r\n\r\n", StringSplitOptions.RemoveEmptyEntries);

            var tiles = new List<Tile>();

            foreach (var block in blocks)
            {
                var splits = block.Split(":", StringSplitOptions.RemoveEmptyEntries);
                var blockNumber = long.Parse(new string(splits[0].Where(char.IsDigit).ToArray()));
                var imageStr = splits[1].Trim('\r', '\n').Split("\r\n", StringSplitOptions.RemoveEmptyEntries);

                tiles.Add(new Tile
                {
                    Id = blockNumber,
                    Image = imageStr.Select(x => x.ToCharArray()).ToArray()
                });
            }

            var first = tiles.First(x => tiles.Count(x.IsNeighbour) == 2)
                .Produce().First(tile =>
                {
                    var rightValid = tiles.Where(x => x.Id != tile.Id).SelectMany(x => x.Produce())
                        .Any(x => x.Left == tile.Right);
                    var downValid = tiles.Where(x => x.Id != tile.Id).SelectMany(x => x.Produce())
                        .Any(x => x.Up == tile.Down);

                    return rightValid && downValid;
                });

            var width = (int) Math.Sqrt(tiles.Count);
            var field = new Tile[width][];
            for (var i = 0; i < width; i++)
            {
                field[i] = new Tile[width];
            }

            field[0][0] = first;
            var used = new HashSet<Tile> {first};
            for (var x = 0; x < width; ++x)
            for (var y = 0; y < width; ++y)
            {
                if (x == 0 && y == 0) continue;

                var up = y > 0 ? field[y - 1][x] : null;
                var left = x > 0 ? field[y][x - 1] : null;

                var validTile = tiles.Except(used).SelectMany(t => t.Produce()).FirstOrDefault(t =>
                    (up == null || up.Down == t.Up) && (left == null || left.Right == t.Left));
                field[y][x] = validTile;
                used.Add(validTile);
            }

            return field[0][0].Id * field[0].Last().Id * field.Last()[0].Id * field.Last().Last().Id;
        }

        private class Tile
        {
            public long Id { get; set; }
            public char[][] Image { get; set; }

            public string Up => new string(Image[0]);
            public string Down => new string(Image.Last());
            public string Right => new string(Image.Select(x => x.Last()).ToArray());
            public string Left => new string(Image.Select(x => x[0]).ToArray());

            public override int GetHashCode()
            {
                return Id.GetHashCode();
            }

            public override bool Equals(object obj)
            {
                if (obj == null)
                {
                    return false;
                }

                if (obj.GetType() != typeof(Tile))
                {
                    return false;
                }

                return Id.Equals(((Tile) obj).Id);
            }

            public Tile TurnLeft()
            {
                var copy = Image.Select(x => x.ToArray()).ToArray();
                var size = Image.Length;

                var newRow = 0;
                for (var oldColumn = size - 1; oldColumn >= 0; oldColumn--)
                {
                    var newColumn = 0;
                    for (var oldRow = 0; oldRow < size; oldRow++)
                    {
                        copy[newRow][newColumn] = Image[oldRow][oldColumn];
                        newColumn++;
                    }

                    newRow++;
                }

                return new Tile
                {
                    Id = Id,
                    Image = copy
                };
            }

            public Tile FlipHorizontal()
            {
                var copy = Image.Select(x => x.ToArray()).ToArray();
                var size = Image.Length;

                for (var i = 0; i < size; ++i)
                for (var j = 0; j < size; ++j)
                {
                    copy[i][j] = Image[size - i - 1][j];
                }

                return new Tile
                {
                    Id = Id,
                    Image = copy
                };
            }

            public Tile FlipVertical()
            {
                var copy = Image.Select(x => x.ToArray()).ToArray();
                var size = Image.Length;

                for (var i = 0; i < size; ++i)
                for (var j = 0; j < size; ++j)
                {
                    copy[i][j] = Image[i][size - j - 1];
                }

                return new Tile
                {
                    Id = Id,
                    Image = copy
                };
            }

            public IEnumerable<Tile> Produce()
            {
                var tmp = this;

                for (var i = 0; i < 4; ++i)
                {
                    yield return tmp;
                    yield return tmp.FlipHorizontal();
                    yield return tmp.FlipVertical();
                    tmp = tmp.TurnLeft();
                }
            }

            public bool IsNeighbour(Tile other)
            {
                foreach (var myTile in Produce())
                foreach (var otherTile in other.Produce())
                {
                    if (myTile.Id == otherTile.Id)
                    {
                        continue;
                    }

                    if (new string(myTile.Image[0]) == new string(otherTile.Image[0]))
                    {
                        return true;
                    }
                }

                return false;
            }
        }

        private static IEnumerable<TestCaseData> TestCases()
        {
            yield return new TestCaseData(@"Tile 2311:
..##.#..#.
##..#.....
#...##..#.
####.#...#
##.##.###.
##...#.###
.#.#.#..##
..#....#..
###...#.#.
..###..###

Tile 1951:
#.##...##.
#.####...#
.....#..##
#...######
.##.#....#
.###.#####
###.##.##.
.###....#.
..#.#..#.#
#...##.#..

Tile 1171:
####...##.
#..##.#..#
##.#..#.#.
.###.####.
..###.####
.##....##.
.#...####.
#.##.####.
####..#...
.....##...

Tile 1427:
###.##.#..
.#..#.##..
.#.##.#..#
#.#.#.##.#
....#...##
...##..##.
...#.#####
.#.####.#.
..#..###.#
..##.#..#.

Tile 1489:
##.#.#....
..##...#..
.##..##...
..#...#...
#####...#.
#..#.#.#.#
...#.#.#..
##.#...##.
..##.##.##
###.##.#..

Tile 2473:
#....####.
#..#.##...
#.##..#...
######.#.#
.#...#.#.#
.#########
.###.#..#.
########.#
##...##.#.
..###.#.#.

Tile 2971:
..#.#....#
#...###...
#.#.###...
##.##..#..
.#####..##
.#..####.#
#..#.#..#.
..####.###
..#.#.###.
...#.#.#.#

Tile 2729:
...#.#.#.#
####.#....
..#.#.....
....#..#.#
.##..##.#.
.#.####...
####.#.#..
##.####...
##..#.##..
#.##...##.

Tile 3079:
#.#.#####.
.#..######
..#.......
######....
####.#..#.
.#...#.##.
#.#####.##
..#.###...
..#.......
..#.###...").Returns(20899048083289);
            yield return new TestCaseData(@"Tile 2539:
#.##......
##......#.
#.#...#..#
###..#...#
....#.#.##
#........#
..#..###.#
#..#..#...
.....#####
##.##..##.

Tile 2909:
....##..#.
#........#
....##....
..###..#..
#..#......
#...#..###
.........#
#...#...#.
....#.....
.##..##.##

Tile 1373:
#..###.##.
#......#.#
..#.....##
..##.#...#
........##
....#...#.
..........
#..##.#.#.
.....#...#
..##.#....

Tile 2953:
######....
........#.
..#.......
#.#.......
##........
##........
..#.....##
#.#......#
##..#....#
#.####.###

Tile 2437:
#..##..##.
.....#...#
#.#..##...
.#......##
#.....#..#
#......#..
...#.#...#
#...#....#
#.........
.##.....#.

Tile 1823:
##.....###
##.#..#..#
....##....
#.........
..#.....#.
#..#......
..#.......
..#.#....#
.....#..#.
####....#.

Tile 3889:
..##...#.#
#........#
#.......##
.......###
..........
....#..#..
..#...#..#
.##...#..#
##.....#.#
.######.#.

Tile 2549:
..#.#.###.
..........
.........#
#........#
#.........
#..#....##
..........
#.....#...
#.#...####
#...#####.

Tile 3797:
#.#.#..#..
#........#
.#.##.....
#........#
#........#
#.........
#.#...##..
#..#.....#
#.#.##....
.#######..

Tile 1249:
.##..##...
.....#....
#....#...#
..#......#
###..#...#
...#....#.
#.....#..#
.#.#......
#.#.##.#.#
#.#.##..#.

Tile 3821:
.####.##.#
.........#
#...##...#
.##.#...##
##..#.##..
.....#.#.#
..#...#.##
#.......##
...#.....#
....#.###.

Tile 3329:
##.##.###.
......#...
...#....##
....#....#
#.........
..#...#...
....#.....
..#......#
..........
...#.##..#

Tile 1279:
##...#....
#.#.#...##
.#..#...#.
.#....#.#.
.##......#
.........#
##......##
..........
.#........
..#..##...

Tile 3907:
.#....##.#
#.#...###.
##.....###
##......#.
..####....
.#...#....
#....#..#.
#.#.......
.#......#.
##....###.

Tile 3833:
....#.###.
.......#.#
...#...#..
#.#.......
..#.....##
#.........
.....#.#..
#.....#...
..#..#....
.#####....

Tile 2011:
.#...#...#
#.#.......
#..#....##
.....#....
.......#..
.#.......#
......#.#.
#.##...###
##..#..###
###..#.###

Tile 3881:
###..#...#
#..#.....#
##..#...##
.....#.##.
.........#
.#.......#
....#..#.#
..#.....##
##......##
...#..#.#.

Tile 2341:
.....##.#.
#....#..#.
....#.#...
#.....#...
.....#....
#.......#.
.........#
##....#..#
.........#
##.#..###.

Tile 2917:
###.##....
##.......#
#........#
#......#..
#.........
........##
.........#
....#....#
#.##...#..
..#######.

Tile 2333:
#####.....
.....#...#
....##...#
..........
...#...#.#
....##....
....#.....
.......#..
###....#.#
..##.#..#.

Tile 2287:
.#..#.#.#.
##...#....
....#.....
.......#..
.....#...#
#....#.###
.........#
#.##..###.
#......#.#
.##.#.#.##

Tile 3391:
#..#.#..#.
......#...
#......#..
#.#.#....#
....#....#
#..#....##
....#....#
..#.....##
#........#
.###.#..##

Tile 2677:
#..#.#....
..#...#..#
#...##...#
##.......#
.........#
..........
#...##.###
#....#....
..##..#.#.
...#...##.

Tile 2273:
.###.####.
##.##...##
.....###.#
#..#..#..#
.##......#
#.#..#...#
#........#
#.........
........##
####.#....

Tile 3967:
....#..##.
..#......#
#....##...
#.....#.##
...#...#.#
#.#.#..##.
#.......#.
#.......##
...##.#..#
...#.#..##

Tile 1553:
.###.#..#.
##...#....
.....#...#
......#.##
.........#
..........
#..##.#..#
#...#.....
#.........
..#..##..#

Tile 1291:
.#.......#
..#......#
......#..#
##.#..#..#
##........
..........
.........#
......#.#.
##....#.##
##...#.#.#

Tile 2003:
..####.##.
##.##....#
#......##.
.........#
..........
...#.##..#
#.#.....#.
..#.#....#
#..#.....#
..##..##.#

Tile 2267:
..#...#...
...#....#.
#..#..#...
#...#.....
...#.....#
.#........
#.#...#..#
...#..#...
#.#......#
.####.#...

Tile 1237:
#.#....##.
.......#.#
.....#....
...#.##...
....#.....
#.#.#....#
#..#......
##........
#.........
#.#.##..#.

Tile 3187:
#.####..##
.....#....
#..#......
.#.#......
..##....##
..#......#
...#.#....
#........#
.....##.#.
.###.#.##.

Tile 2393:
#.#.###.##
#.........
#..#.#...#
#.#.......
#.#....#.#
#.#...#...
...#.....#
#.#....#.#
#...#....#
..#.###...

Tile 3413:
.##...#...
#.....#...
#.........
#..#..#..#
#....#.#..
##..#.....
#.....####
#........#
....##....
###.###.##

Tile 3083:
#####.####
#..##.....
..........
........#.
.#.......#
.........#
#...#.#..#
#....##.#.
##..#.##.#
....####.#

Tile 1523:
###..##..#
.#.#..#..#
....#...##
.....#....
#..#.....#
#....#...#
........##
..........
##.....#..
#.#..##..#

Tile 3673:
#.####.###
#........#
.#...#..#.
.........#
##.....#..
..........
#.........
......#..#
##.#.....#
.#..##..##

Tile 2111:
#.#.#.####
......#.#.
..#......#
........##
#.....##..
.........#
#..#......
........#.
#........#
..#..#.#..

Tile 1153:
.#.#..#..#
#.....##..
...#.....#
...#.....#
#..#.....#
##.#......
#.####....
#........#
#.........
..#.....#.

Tile 3457:
..#......#
#.##...#..
#.........
...#...##.
....#.....
.#........
#........#
......##.#
..........
#.#.....#.

Tile 2693:
.####.....
#........#
..#....#..
.......###
..#...#...
.....##...
#.#.#....#
#.#.......
##.##.#..#
.####.#..#

Tile 1367:
##...##.#.
.......#..
...#..#...
#....#....
##........
##....##.#
#......#.#
#...#.##.#
#...#.#..#
.##.....##

Tile 2543:
#..###.#.#
#....###.#
##......#.
...#.....#
#....#..##
......#..#
#..#.#.#..
...#....#.
....##.###
#...######

Tile 1229:
#.#....##.
#...#...##
.##.......
#...#..#.#
#.#.#..#..
#..#..#..#
##....#...
#...#...##
#.#.......
##.#.#..#.

Tile 2833:
.#...#..#.
........#.
#.#..#....
...##..#.#
#....#....
........##
.........#
.........#
#........#
.###.#.#.#

Tile 2089:
.####.###.
..###....#
#....#.#..
##........
..#......#
###...#..#
###...#.##
......#...
#.........
.###...##.

Tile 3209:
.######..#
.#......#.
#.#.#.....
##.....#.#
#......###
##...##...
......#...
#.#.......
#..#....#.
...#...###

Tile 1979:
#...###.##
#.......##
#.#.#....#
....#.....
...#.#..##
#.##...#..
##.#.....#
#...#.....
.....#....
....##..#.

Tile 3779:
##.##..#..
..#......#
#.#.....#.
.#........
#...##..##
##.....#..
...#.#....
##........
#..#...#..
.###.##.##

Tile 3089:
##.#.##..#
#..#......
..#......#
...#....#.
#.#.......
..........
#.....#...
#........#
#......#.#
.####.##.#

Tile 1627:
#..#....#.
.#.####.#.
#...#.....
...##.#.##
....#...#.
...#.##.##
.......#.#
#..#..#..#
#.....##.#
#...##.#.#

Tile 2389:
.##...#.#.
#..#..#...
#.........
.........#
.....#....
....#...#.
.#.#...#.#
....###..#
#....##.#.
####..#.##

Tile 1193:
.#.##.####
.#......##
#...##...#
..##..#.#.
..........
.....##.##
#......#..
...#.##...
....#..##.
##.#######

Tile 3323:
#..#...###
........#.
##.....#.#
#....#...#
....#.....
#...#..#..
#.........
.#.....#.#
..#......#
#..#.#....

Tile 2719:
####......
..#.....#.
.#....#...
#...#..#..
#.........
#......#..
#..#....##
.....#....
#.##...##.
#.#.#..#.#

Tile 2399:
#..##.####
.........#
#.........
...#...##.
.........#
#...#....#
..........
........##
..........
.#.#...#..

Tile 1543:
##..#.####
....#....#
....######
#..####.##
...##..#..
#..#.#...#
#.#.......
...#....#.
##..###.#.
#.##.....#

Tile 1723:
.#.##..#..
...#....#.
...#......
##....#.##
.#....##..
#.#......#
##.##....#
.....#...#
..#.......
#..#.##..#

Tile 2503:
..###...##
..........
#..#.##..#
...#.#...#
...###..##
.....#....
#.....#..#
.#.#.#.##.
#......#.#
..####..##

Tile 2887:
......##.#
##........
.#........
#.......##
#.##...##.
#...#...##
##.....##.
....#.....
........##
#.######..

Tile 3467:
#..#..#.#.
....###...
....##...#
....#.#...
..........
........#.
......#.#.
#.#...#..#
#........#
#.##.##.##

Tile 3677:
....##...#
#.##..#...
.#....##..
.#.#......
#.##..#...
....#.....
......#.#.
#..###..#.
#.#....#..
.####.##..

Tile 1493:
.##.#...##
#.##...##.
.#...#####
#..#....#.
#.#......#
.........#
##......#.
#......#.#
#....#.#.#
#.#...#..#

Tile 2687:
.##.##..##
.......#.#
#........#
##...##..#
...#....##
.....#.#..
#.##.#.#.#
#.........
#....#...#
###.....##

Tile 1861:
####..##..
...#..#...
.......#.#
#.........
#.........
#........#
...#.....#
#.#......#
#.#..##.#.
.#..#..#.#

Tile 2081:
#..#####.#
...#.....#
.#......#.
#........#
.......#.#
#....####.
#....###.#
.#....####
....#.....
.##.##...#

Tile 2113:
#..#..##..
.#.....##.
.....#.#.#
#........#
.......#.#
...##.##..
......##..
#....#.#.#
#.....#..#
#...#..#.#

Tile 2203:
.#.##..#.#
....###..#
.#.#....##
#...#.....
##.#...#.#
..#..#..#.
#..#......
#......#..
#...###...
.#...##.#.

Tile 3943:
#....###..
#.....##.#
#....#...#
#..#....##
###..#...#
.#.#.#...#
.......##.
#....##..#
.#.......#
.#..#.#.##

Tile 2579:
.#...###..
#.........
#........#
.......#.#
##.#......
....#....#
#.......#.
.#...#....
.....#...#
..#.##..##

Tile 1103:
.#.##.###.
#......#.#
....#....#
....#.#...
#......#.#
..........
..........
#...#....#
#........#
....#####.

Tile 1993:
.##..#....
....#.#..#
##...#....
.........#
#...#....#
..........
..#..#.#..
.....##...
.##...##.#
..##.##...

Tile 1801:
#..##.####
#.......##
#......#.#
#.#....#.#
#.##....#.
.#..#.###.
...#......
#.....##.#
.#.......#
##.###..##

Tile 3319:
.###.##.#.
##......#.
.#........
#.#......#
#..#...#.#
#.#......#
.#.......#
#........#
#......#..
....###..#

Tile 3229:
###...###.
#....##..#
....#...##
...#......
..#.#....#
.......#.#
......#.#.
.##..#.#.#
...#..###.
##...#.#..

Tile 1033:
#..#.##.##
....##....
#.......#.
#......#.#
#........#
##.......#
#..##..#.#
.......###
#.........
.##.#.#..#

Tile 3769:
###...#.##
........#.
#.........
#........#
..#.#.####
#...#...##
.#.#.....#
..........
#........#
#.##.#...#

Tile 1571:
.####.....
#......#.#
#.#.#.#.#.
.........#
##.......#
.......#.#
..#.....#.
#.........
#..#....#.
######...#

Tile 1657:
...#.#.##.
........##
#.........
#.#..#....
#..#.#.#.#
...#.###..
....#.....
...#.....#
#.....##.#
#####.#.##

Tile 3541:
.####.####
..........
#......##.
#......#..
#........#
#.....#..#
........#.
##.....#.#
.......#..
#.#.###.##

Tile 3019:
...##..##.
#..##...#.
#....##...
#........#
#..#.#...#
#..#.....#
.#........
#.#..#...#
...#.....#
.#......##

Tile 2383:
.#.#....##
#....#....
......#..#
#.....#..#
#.##.#..#.
#..#....##
.....#...#
....#...#.
#.....#.#.
.#.#.#.###

Tile 3929:
...#.###.#
#.#..#....
.........#
..#......#
.#......##
#.....#.##
#...#...##
#.##......
#.....##..
#...##....

Tile 1697:
##.##.....
...#.....#
#..#.....#
.........#
...#...##.
.#..#...##
...###...#
#..#..#...
.#.#..#...
..#...#...

Tile 1999:
..##....#.
.........#
...#.#...#
#.........
..#.#.#...
#......#.#
.#.##...#.
#....#...#
#....#.#.#
#.#..##...

Tile 1289:
#..###....
...#......
....#.....
#.....##.#
#.##....#.
...#.#..##
#.#...#...
..........
..#......#
####..###.

Tile 1163:
.###.#..#.
#..#....#.
#...#...##
...#.....#
#.....#...
.........#
..........
###.......
#........#
###...####

Tile 3121:
##....#...
#..#.#.#.#
.#....#...
..#......#
#....#.#..
.##......#
......#.##
....#.#...
...#......
#...#...#.

Tile 2939:
..##.#.###
#....##..#
....#..###
###....#..
#..###..#.
..##.....#
#..#....##
..#.#.....
#......#..
.#.#.#..##

Tile 1129:
....#..#.#
#........#
...#.#....
...#...#.#
#........#
..........
..#...####
...#.#....
#....#..##
##.#.##..#

Tile 1877:
..##..#...
#.#...#...
..#...##.#
#......#..
......#.##
.##....#.#
....#..#..
......#...
#..#..#..#
#..#..##..

Tile 3061:
..#.#.....
.#........
..........
#...#.#...
..#......#
........##
#......#..
#..#.....#
#.#....#..
.####.#.##

Tile 2851:
.#####..##
..##...###
#......#..
.#..#....#
.....###..
.........#
.......###
.....#.###
#......#..
.##.##..##

Tile 1409:
##.##..###
#.........
#...###..#
.........#
........##
#.#.#...#.
.#...#.##.
....#..#..
#..#...#.#
#.###.....

Tile 3853:
...###.#.#
##.#......
.....##.#.
.#.......#
....#....#
#.#.#..#.#
....##....
........##
#.#.......
.#.#.##.##

Tile 2803:
.#...####.
#..##...#.
#.#..#....
.....#...#
.........#
#....##...
#........#
##....#...
#..#..#..#
..#.#...##

Tile 1709:
....#.....
.........#
.........#
....#....#
..##.#....
....#.....
#.#.......
#.......##
#...#....#
.#.....#.#

Tile 2351:
..#.#.#...
##.......#
....#.#...
......#..#
..........
.......#.#
##........
#.......#.
.....#..#.
.#...##..#

Tile 2347:
###..#..##
###......#
#..##.#.##
#...#...#.
#.........
.....#.###
...#....##
#......#..
#.#.##...#
.###..#...

Tile 1307:
##..#####.
.#....#..#
..........
#...#..#..
.....#....
#.##.#...#
###..##.#.
.##.#..#.#
#.#.#.....
..######.#

Tile 1901:
######..#.
##.#.....#
#....#.#.#
........#.
....#....#
#.......##
#........#
.......#.#
.#..##...#
.#.#.#####

Tile 2029:
#...##.##.
#........#
##....##.#
#.#..#....
.##..#....
.#....#...
.##......#
..........
##..#.....
#.......##

Tile 3571:
##...#.#.#
##....#..#
....#.#...
..#......#
#......#.#
..#....###
..........
#.#......#
.##.....##
.##.#...##

Tile 1399:
...###...#
......#..#
##...#.#.#
#........#
#.#.#.#..#
....####..
#.....#..#
.....#.#.#
#......#.#
#...#..#.#

Tile 1381:
#..#....#.
#....#...#
......##..
#....#...#
..#.#...#.
##..#....#
#....#...#
.....#....
#.......##
#####..#.#

Tile 1549:
##...####.
........#.
........#.
..#...##.#
.........#
#.#.#.#..#
.#.....#.#
.....##.#.
##.......#
..#.##....

Tile 3623:
..#....###
...#...#..
.......#..
.##......#
..#..##...
.........#
#...#.....
..#......#
..#......#
..##..###.

Tile 2143:
#.#..#.#..
#...#...#.
#......#..
.#..#...##
#.....#.##
......##.#
..#.#...#.
..........
#...#....#
#....#..##

Tile 3631:
#######...
#.......##
..........
.....##..#
........##
#..#.#....
.......#.#
........#.
#.......#.
..####..##

Tile 3359:
#..#...#..
...#......
...#.#.#.#
.......#..
...#.#....
##.....#.#
#.........
#..#......
#........#
#.....#.##

Tile 2239:
......#.#.
###.#.....
.#....#...
..##......
##.####..#
..........
..#...#..#
#..##....#
##...#....
##.#.#...#

Tile 1741:
....###.##
##...#...#
....##...#
#.......##
#.#.......
...###...#
#.......#.
.##....#..
#.........
..###.####

Tile 1597:
..#..###..
#...##.###
#.#..#....
#.#...#..#
#....#...#
#.......##
......#..#
##...##...
#.####....
..#.#....#

Tile 3761:
#.###.####
..#.#.#..#
....#.##.#
.###....#.
#......#.#
#......#..
#.#......#
##.......#
#.#.......
.#..#.#.#.

Tile 3203:
#......#.#
#.....#...
#.#.#..#..
......#...
#..##.....
##...#...#
.....#...#
..#...#..#
#.........
.#.#..###.

Tile 1579:
###.#.....
.#.###..#.
.....###.#
#...#.##.#
...#..#...
...#.....#
...#.....#
#.......##
..#.#..#..
###.....#.

Tile 3617:
#......#..
#.....#...
.....#.##.
#....#.#.#
...#..#..#
......#.#.
#..##....#
##....#...
.#...#....
#.....##.#

Tile 1667:
#.....#.##
##....#..#
..........
##........
.#..#.....
#........#
...#.#.#.#
#.........
.#........
..#.#.###.

Tile 2153:
....##.##.
........#.
.#..#.....
....###..#
..##...#..
.#.....###
.#...###..
#.#..#.##.
..##....##
####.#....

Tile 1721:
.###..##..
#.#....#.#
.....##..#
#.........
##...#...#
#......#.#
.#......##
#........#
...#...###
####..#...

Tile 3539:
#.##.#.#.#
.........#
#..#.....#
.....#....
..#.......
##.#....##
..#.##...#
........##
#....#....
#.#..#.#.#

Tile 3313:
...#..####
.......#.#
#........#
.....#.#..
#..#..##..
#...#.....
#..#...#.#
...#......
##....#.#.
.#.###..#.

Tile 3851:
...#..##..
#......#.#
...#..##..
#........#
#....#...#
#.....#..#
#...##.##.
##.......#
.#.##..##.
..###..#..

Tile 3389:
.####.##..
.#...#..##
..........
.#......##
.##.......
###......#
...#.#...#
.....#...#
#.#....#.#
..####.#.#

Tile 1933:
..###.#..#
..#......#
#.#....#.#
#..#......
##...#....
.....#....
....#..#.#
.#..##...#
#......#..
......#.#.

Tile 1361:
#..##...##
..........
.........#
#.#......#
#........#
..##..#..#
..#..#..##
.....#....
....#....#
#.#.###.#.

Tile 2789:
.##.##.###
#....#.#.#
.....#.#..
..........
...#.#...#
.........#
....#.....
......##..
#......#..
#.###.####

Tile 3637:
.##.##....
###...#...
###...#.#.
..........
###......#
#.......##
##.....###
....###..#
#.......#.
...##..#.#

Tile 2411:
.##.#.###.
......#.#.
#...#..###
##.#....##
#.........
..####....
#..#.#...#
..........
#...#..#.#
#.##...##.

Tile 1487:
...#.#...#
.#..##...#
#....#....
###.###..#
..##..#..#
#..#......
##...##...
..#..#....
.....#.#..
.....##.##

Tile 1061:
.#####..#.
#.......#.
...#......
....#...#.
....#.#...
#.###...#.
....##...#
###.....#.
...##...#.
#....#.#..

Tile 1669:
##...##..#
#........#
.#.#......
.###.##...
#...#.....
..#.....##
#...#..#.#
#.##....#.
#........#
##.#.#.##.

Tile 1123:
...###...#
....#.....
#...#....#
...#.....#
#.........
#....#..#.
.........#
.#....##.#
......##.#
#.#..#.#..

Tile 2767:
..###.####
#...##....
.........#
.........#
#....##...
#.#.......
.........#
.#........
#........#
#...#...##

Tile 1931:
##..###...
##..##..##
..##..##..
.#...#....
...#......
#...##....
.#.......#
...#.....#
....#.....
.#.#.###.#

Tile 2731:
...#.#..##
..........
..#......#
##....#..#
..#..#.#.#
..........
#.....#...
.##.##.#..
#....##...
.###..#.#.

Tile 2689:
###.#..###
.......###
.#....#..#
......##.#
##...#...#
........##
#...#...##
.........#
....##....
....##.#.#

Tile 2897:
#.........
#.#...#...
##.#......
....#.##.#
#........#
#.......#.
.#....#...
.....#...#
.....#..##
..#.####.#

Tile 3931:
#.#..##.#.
#......#..
#...###.#.
.##.##....
#...###..#
#...###...
.....#.#.#
#......##.
.........#
#.#######.

Tile 1783:
#......###
.........#
##....#..#
.#..#.#.##
........#.
#..#......
..........
..........
##...#...#
...##.#.##

Tile 2293:
##...#...#
..###.....
.........#
.........#
..#..#....
.....#...#
#....##.#.
#.........
...#.....#
.###..#.##

Tile 3709:
#####.###.
.###......
#..#....#.
#........#
##..#.#..#
.#.......#
.....#...#
........#.
####..##..
.#..##.###

Tile 2357:
.#..###..#
##..#....#
.....#..##
#...#.....
..........
##...#...#
.#....#..#
##.#....##
....#.#...
#.##.#...#

Tile 3331:
#.#..#.###
#...##.###
....#.#...
..#..#...#
.#.##..#.#
#.....#.#.
..#....#..
#.#.##.#..
#...###...
##..####.#

Tile 1297:
..####.###
#..#....#.
#....#...#
#.........
###.#....#
....#..#..
.##.......
.........#
#..#......
#...#.....
").Returns(54755174472007);
        }
    }
}